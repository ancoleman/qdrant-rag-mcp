{
  "server": {
    "name": "qdrant-rag-server",
    "host": "0.0.0.0",
    "port": 8080,
    "log_level": "INFO"
  },
  "qdrant": {
    "host": "${QDRANT_HOST:-localhost}",
    "port": "${QDRANT_PORT:-6333}",
    "api_key": "${QDRANT_API_KEY:-}",
    "grpc_port": "${QDRANT_GRPC_PORT:-6334}",
    "https": false
  },
  "embeddings": {
    "model": "${EMBEDDING_MODEL:-all-MiniLM-L6-v2}",
    "cache_dir": "${SENTENCE_TRANSFORMERS_HOME:-./data/models}",
    "device": "auto",
    "batch_size": 32,
    "normalize_embeddings": true,
    "show_progress_bar": true
  },
  "indexing": {
    "chunk_size": 1000,
    "chunk_overlap": 200,
    "code_chunk_size": 1500,
    "code_chunk_overlap": 300,
    "documentation_chunk_size": 2000,
    "documentation_chunk_overlap": 400,
    "batch_size": 100
  },
  "search": {
    "max_results": 5,
    "score_threshold": 0.7,
    "rerank": true,
    "enhanced_ranking": {
      "base_score_weight": 0.4,
      "file_proximity_weight": 0.2,
      "dependency_distance_weight": 0.2,
      "code_structure_weight": 0.1,
      "recency_weight": 0.1
    },
    "documentation_ranking": {
      "base_score_weight": 0.4,
      "file_proximity_weight": 0.2,
      "dependency_distance_weight": 0.0,
      "code_structure_weight": 0.0,
      "recency_weight": 0.4
    }
  },
  "collections": {
    "code": "code_collection",
    "config": "config_collection",
    "documentation": "documentation_collection"
  },
  "logging": {
    "enabled": true,
    "level": "${QDRANT_LOG_LEVEL:-INFO}",
    "base_dir": "${QDRANT_LOG_DIR:-~/.mcp-servers/qdrant-rag/logs}",
    "rotation": {
      "max_days": 7,
      "max_size_mb": 10,
      "compress": false
    },
    "categories": {
      "indexing": "DEBUG",
      "search": "INFO",
      "errors": "ERROR"
    }
  },
  "models": {
    "available": {
      "general": [
        "all-MiniLM-L6-v2",
        "all-MiniLM-L12-v2",
        "all-mpnet-base-v2",
        "all-distilroberta-v1"
      ],
      "code": [
        "microsoft/codebert-base",
        "microsoft/unixcoder-base",
        "Salesforce/codet5-base"
      ],
      "multilingual": [
        "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2",
        "sentence-transformers/distiluse-base-multilingual-cased-v2"
      ],
      "large": [
        "intfloat/e5-large-v2",
        "BAAI/bge-large-en-v1.5"
      ]
    }
  },
  "documentation": {
    "supported_extensions": [
      ".md",
      ".markdown", 
      ".rst",
      ".txt",
      ".mdx"
    ],
    "features": {
      "extract_headings": true,
      "extract_code_blocks": true,
      "extract_links": true,
      "extract_frontmatter": true,
      "preserve_hierarchy": true
    },
    "chunking": {
      "by_sections": true,
      "min_section_size": 100,
      "max_section_size": 3000,
      "split_large_sections": true,
      "preserve_context": true
    }
  },
  "github": {
    "authentication": {
      "token": "${GITHUB_TOKEN:-}",
      "app_id": "${GITHUB_APP_ID:-}",
      "private_key_path": "${GITHUB_PRIVATE_KEY_PATH:-}",
      "installation_id": "${GITHUB_INSTALLATION_ID:-}"
    },
    "api": {
      "base_url": "${GITHUB_API_URL:-https://api.github.com}",
      "timeout": 30,
      "retry_attempts": 3,
      "retry_delay": 1.0,
      "rate_limit_buffer": 100
    },
    "repository": {
      "current_owner": "${GITHUB_REPO_OWNER:-}",
      "current_repo": "${GITHUB_REPO_NAME:-}",
      "auto_index_on_switch": true,
      "exclude_patterns": [
        ".git/**",
        "node_modules/**",
        "__pycache__/**",
        "*.pyc",
        ".env*",
        "logs/**"
      ]
    },
    "issues": {
      "default_state": "open",
      "max_fetch_count": 50,
      "analysis": {
        "search_limit": 10,
        "context_expansion": true,
        "include_dependencies": true,
        "code_similarity_threshold": 0.7,
        "response_verbosity": "summary",
        "include_raw_search_results": false,
        "max_relevant_files": 5,
        "truncate_content": true,
        "content_preview_length": 200
      }
    },
    "pull_requests": {
      "default_branch": "main",
      "draft_by_default": true,
      "auto_assign_author": true,
      "template": {
        "title_prefix": "[Auto] ",
        "body_template": "## Summary\n{summary}\n\n## Changes\n{changes}\n\n## Related Issue\nFixes #{issue_number}\n\n---\nðŸ¤– Generated automatically via RAG analysis"
      }
    },
    "safety": {
      "dry_run_by_default": true,
      "require_confirmation": true,
      "max_files_per_pr": 10,
      "max_lines_per_file": 1000,
      "blocked_file_patterns": [
        "*.key",
        "*.pem",
        "*.env",
        "secrets/**",
        ".github/workflows/**"
      ],
      "audit_logging": true
    },
    "workflows": {
      "auto_resolve": {
        "enabled": false,
        "confidence_threshold": 0.85,
        "require_tests": true,
        "max_complexity": "medium"
      },
      "suggestion_only": {
        "enabled": true,
        "include_code_samples": true,
        "include_file_references": true
      }
    }
  },
  "context_tracking": {
    "enabled": true,
    "session_dir": "${HOME}/.mcp-servers/qdrant-rag/sessions",
    "max_session_files": 100,
    "token_estimation": {
      "method": "simple",
      "chars_per_token": 4
    },
    "context_window": {
      "size": 200000,
      "warning_threshold": 0.8,
      "critical_threshold": 0.9
    },
    "auto_save": {
      "enabled": true,
      "interval_seconds": 300,
      "on_shutdown": true
    },
    "tracking": {
      "track_file_reads": true,
      "track_searches": true,
      "track_tool_uses": true,
      "track_indexing": true,
      "include_content_preview": false
    },
    "display": {
      "include_in_responses": false,
      "show_warnings": true,
      "compact_indicator": true
    }
  }
}